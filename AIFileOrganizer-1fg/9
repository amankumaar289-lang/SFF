Краткое описание концепции формирования и подписания формуляров в формате PDF в подсистеме «Процессы обработки документов»

Дата составления: 13.08.2025

Цели: 
1.	Обеспечить для новых документов учета настраиваемый процесс формирования и подписания файлов формуляров (печатных форм) документов учета на каждом этапе процесса обработки документа, для которого это определено в настройках шаблона процесса.
2.	Обеспечить опциональную возможность сформировать представления (визуализации) формуляров (печатная форма со штампами электронных подписей для файлов в формате XML) в формате PDF на дату формирования для документов прошлых периодов, где не были сформированы и подписаны файлы формуляров в формате PDF.
3.	Обеспечить опциональную возможность группового подписания с помощью ЭЦП должностным лицом, которое отвечает за сдачу в архив, файлов представления (визуализации) формуляров (печатная форма со штампами электронных подписей для файлов в формате XML) в формате PDF для документов прошлых периодов.

1. Формирование и подписание формуляров в формате PDF для новых документов учета

В настройках шаблона для каждого этапа для печатных форм первичных документов необходимо выбрать настройку действий:




Доступные значения:
•	Формировать и подписывать только на этом этапе; – используется, например, на этапе исполнителя или члена комиссии, когда формуляр меняется.
•	Формировать и подписывать на этом и следующих этапах; – используется, например, на этапе председателя комиссии, когда в дальнейшем формуляр уже не изменяется.
•	Подписывать ранее созданный; – используется, например, на этапе руководителя.



Перед подписанием пользователь может просмотреть формуляр (для каждого формуляра формируется файл в формате PDF – основной файл формуляра и в формате MXL – для удобства визуализации в 1С, чтобы не требовалось открывать формуляр в сторонних программах и для удобства визуализации формуляра со штампами электронных подписей)



Ранее можно было просмотреть только файл с данными реквизитов документа учета и справочников в формате XML, а теперь пользователь сможет просмотреть данные формуляров в форматах MXL и PDF.

По щелчку правой кнопки мыши или по кнопке «Открыть» можно просмотреть подписываемые файлы.
Данные документа XML (возможность есть в актуальном релизе):



Данные формуляра в формате PDF или MXL со штампами электронных подписей, если они выполнены на других этапах (новая возможность):




По итогу обработки в карточке процесса можно будет увидеть все формуляры с возможностью печати или сохранения на диск, а также просмотра электронных подписей.



При выборе формуляра в списке будет визуализировано его представление со штампами электронной подписи.





Штампы подписей выводятся под визуализацией формуляра.



Для открытия списка файлов формуляров необходимо перейти по ссылке «Файл формуляра».


Примечание: Концепция решения предусматривает опциональную возможность сохранения на диск и отправки файла формуляра в формате PDF контрагенту для подписания. После получения файлов электронной подписи контрагента есть возможность вручную добавить файлы подписи файла формуляра (команда «Добавить электронную подпись из файла» в форме «Присоединенные файлы», которая открывается по ссылке «Файл формуляра»).

На закладке «Визуализация формуляров» показан перечень всех видов формуляров в рамках процесса обработки документов. При выборе показывается последний формуляр (он считается итоговым) со штампами электронных подписей этого формуляра, а также со штампами подписей всех формуляров этого вида в рамках процесса обработки учетного документа.



Пример карточки процесса для регистра учета представлен ниже.



2. Формирование формуляров в формате PDF для документов учета прошлых периодов

Для документов учета прошлых периодов нет возможности пройти все этапы и сформировать и подписать файлы формуляров в формате PDF, поэтому в случае необходимости можно с помощью специальной обработки сформировать только итоговые файлы формуляров в форматах PDF и MXL со штампами электронной подписи данных документов в формате XML.

В состав ПОД 1.0.17 для этой цели включена обработка «Формирование представления ЭД для документов без формуляров».

В БГУ КОРП обработка «Формирование представления ЭД для документов без формуляров» в командном интерфейсе доступна в разделе Органайзер – Сервис.

Вначале следует определить период обрабатываемых документов (шаг 1).


Следует указать шаблоны процессов и устранить все замечания по списку печатных форм, которые будут сформированы как формуляры со штампами электронных подписей (шаг 2).



Можно заполнить все доступные шаблоны или только те шаблоны, которые использовались при обработке (длительная операция, будут проанализированы все процессы обработки за указанный период).

При этом шаблоны процессов, которые использовались в прошлых периодах, могут иметь замечания по настройкам использования первичных документов (например, включены все первичные документы, которые только возможны для документа учета). 

Можно в обработке сразу указать список печатных форм или сначала настроить список в шаблоне, а потом заполнить данные из него для обработки.



В настройках шаблонов необходимо включить только нужные виды первичных документов (печатных форм), сохранить (шаг 3).
Следует сформировать список документов учета (шаг 4).
На последнем этапе необходимо запустить процесс создания представлений формуляров для документов учета прошлых лет (шаг 5).

Пример карточки процесса после формирования представлений формуляров документов прошлых лет представлен ниже. 



Закладка «Формуляры» отсутствует, т.к. формуляры не формировались. На закладке «Визуализация формуляров» представлена зафиксированная на дату формирования представлений формуляров печатная форма документа, которая указана в шаблоне процесса.

3. Подписание формуляров в формате PDF для документов учета прошлых периодов

Для документов учета прошлых периодов можно подписать сформированные итоговые файлы формуляров со штампами подписей XML файлов в форматах PDF и MXL в целях заверения корректности их составления. Это может быть полезно для передачи этих файлов в сторонние программы и архив.

В состав ПОД 1.0.17 для этой цели включена обработка «Подписание представления ЭД для документов без формуляров».

Специальная обработка «Подписание представления ЭД для документов без формуляров» позволит подписать ранее сформированные формуляры со штампами подписей для документов прошлых лет.
Обработка позволяет указать размер порции файлов для подписания (количество документов на подпись) и заполнить список подписываемых файлов представлений формуляров. 

В БГУ КОРП обработка «Подписание представления ЭД для документов без формуляров» в командном интерфейсе доступна в разделе Органайзер – Сервис.

В поле «Количество документов на подпись» указано количество документов, которые составляют одну порцию подписания (по умолчанию это 1000 документов).
По кнопке «Подписать» пользователь указывает сертификат ЭЦП.


По кнопке «Подписать» в форме выбора сертификата ЭЦП программа подпишет все файлы представлений формуляров на дату формирования из списка.



